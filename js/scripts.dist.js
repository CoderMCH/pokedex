let repoPokemon=function(){let e=[];function t(t){e.push(t)}function o(){return e}function n(e){return"object"==typeof e&&JSON.stringify(Object.keys(e)).includes(JSON.stringify(["name","detailsUrl"]))}function i(e){n(e)?t(e):alert("This is not a valid pokemon.")}function a(e){if(e.modal){p("Pokemon details",e.modal.details,e.modal.imgList);return}s(),e.showModal=!0}async function r(){try{s(),await new Promise((e,t)=>{setTimeout(()=>fetch("https://pokeapi.co/api/v2/pokemon/?limit=100000",{method:"GET"}).then(e=>e.json()).then(t=>{t.results.forEach(e=>{i({name:e.name,detailsUrl:e.url})}),d(),e()}).catch(e=>{console.error(e),t(e)}),500)})}catch(e){return console.error(e)}}async function l(e){try{return await new Promise((t,o)=>{setTimeout(()=>{fetch(e.detailsUrl,{method:"GET"}).then(e=>e.json()).then(o=>{e.id=o.id,e.types=o.types,e.sprites=o.sprites,e.height=o.height,e.weight=o.weight;let n="#"+e.id+"\xa0"+e.name+"\n";n+="types:\xa0",e.types.forEach(e=>n+=e.type.name+"\xa0"),n+="\nheight: "+e.height/10+"m\n",n+="weight: "+e.weight/10+"kg\n",e.modal={details:n,imgList:[e.sprites.front_default,e.sprites.front_shiny,e.sprites.back_default,e.sprites.back_shiny,e.sprites.back_female,e.sprites.back_shiny_female,e.sprites.front_female,e.sprites.front_shiny_female]},e.showModal&&p("Pokemon details",e.modal.details,e.modal.imgList),t()}).catch(e=>{console.error(e),o()})},500)}),e}catch(t){return console.error(t)}}function s(){p("","Loading......")}function d(){c()}function p(e,t,o){$("#modalLong").modal("show"),$("#modalLongTitle").text(e);let n=$("#modalLong .modal-body").empty(),i=$("<p></p>");t.split("\n").forEach(e=>i.append(e).append("<br>")),n.append(i);let a=$("<div></div>").addClass("row");o&&o.forEach(e=>{if(!e)return;let t=$("<img>").attr("src",e).addClass("col col-sm-6");a.append(t)}),n.append(a)}function c(){$("#modalLong").modal("hide")}return{add:t,getAll:o,validate:n,addv:i,filterByName:function t(o){return e.filter(e=>e.name==o)},addListItem:function e(t){let o=$("<button></button>").addClass("btn btn-primary");o.attr("data-toggle","modal").attr("data-target","#modalLong"),o.append(t.name),function e(t,o){t.on("pointerdown",()=>a(o))}(o,t);let n=$(`<div id="${t.name}-div"></div>`);n.addClass("list-group-item list-group-item-dark"),n.append(o);$("#pokemon-list").append(n)},showDetail:a,loadList:r,loadDetails:l,showLoadingMessage:s,hideLoadingMessage:d,showModal:p,hideModal:c}}();function toggleFilterSelector(){$(".filter-selectors").toggle()}repoPokemon.loadList().then(()=>{repoPokemon.getAll().forEach(e=>{repoPokemon.addListItem(e),repoPokemon.loadDetails(e)})}).catch(e=>console.error(e)),toggleFilterSelector();const types=["normal","fire","water","electric","grass","ice","fighting","posion","ground","flying","psychic","bug","rock","ghost","dragon","dark","steel","fairy","stellar"];let typeFilter=types;function searchPokemon(){$("#pokemon-list button").parent().show();let e=$("#pokemon-search").val();$("#pokemon-list button:not(:contains("+e+"))").parent().hide();let t=$("#filter-height").val(),o=$("#filter-weight").val();repoPokemon.getAll().forEach(e=>{let n=!1;e.types.forEach(e=>{n=n||typeFilter.includes(e.type.name)}),(!n||e.height<10*t||e.weight<10*o)&&$(`#${e.name}-div`).hide()})}$("#pokemon-search").on("input",e=>{searchPokemon()}),types.forEach(e=>{let t=$(`<input type="checkbox" id="${e}-input" checked="true"></input>`);t.on("input",t=>{t.target.checked?typeFilter.push(e):typeFilter.splice(typeFilter.indexOf(e),1),searchPokemon()});let o=$(`<label for="${e}-input">${e}</label>`),n=$("<div></div>");n.addClass("col-2"),n.append(t).append(o),$("#type-filter").append(n)}),$("#filter-height").on("input",e=>{searchPokemon()}),$("#filter-weight").on("input",e=>{searchPokemon()});