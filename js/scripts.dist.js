let repoPokemon=function(){let e=[];function t(t){e.push(t)}function n(){return e}function o(e){return"object"==typeof e&&JSON.stringify(Object.keys(e)).includes(JSON.stringify(["name","detailsUrl"]))}function a(e){o(e)?t(e):alert("This is not a valid pokemon.")}function i(e){d(),s(e).then(e=>{let t="#"+e.id+"\xa0"+e.name+"\n";t+="types:\xa0",e.types.forEach(e=>t+=e.type.name+"\xa0"),t+="\nheight: "+e.height/10+"m\n",t+="weight: "+e.weight/10+"kg\n";p("Pokemon details",t,[e.sprites.front_default,e.sprites.front_shiny,e.sprites.back_default,e.sprites.back_shiny,e.sprites.back_female,e.sprites.back_shiny_female,e.sprites.front_female,e.sprites.front_shiny_female])}).catch(e=>console.error(e))}async function r(){try{d(),await new Promise((e,t)=>{setTimeout(()=>fetch("https://pokeapi.co/api/v2/pokemon/?limit=100000",{method:"GET"}).then(e=>e.json()).then(t=>{t.results.forEach(e=>{a({name:e.name,detailsUrl:e.url})}),l(),e()}).catch(e=>{console.error(e),t(e)}),500)})}catch(e){return console.error(e)}}async function s(e){try{return d(),await new Promise((t,n)=>{setTimeout(()=>{fetch(e.detailsUrl,{method:"GET"}).then(e=>e.json()).then(n=>{e.id=n.id,e.types=n.types,e.sprites=n.sprites,e.height=n.height,e.weight=n.weight,t()}).catch(e=>{console.error(e),n()})},500)}),e}catch(t){return console.error(t)}}function d(){p("","Loading......")}function l(){h()}function p(e,t,n){$("#modalLong").modal("show"),$("#modalLongTitle").text(e);let o=$("#modalLong .modal-body").empty(),a=$("<p></p>");t.split("\n").forEach(e=>a.append(e).append("<br>")),o.append(a);let i=$("<div></div>").addClass("row");n&&n.forEach(e=>{if(!e)return;let t=$("<img>").attr("src",e).addClass("col col-sm-6");i.append(t)}),o.append(i)}function h(){$("#modalLong").modal("hide")}return{add:t,getAll:n,validate:o,addv:a,filterByName:function t(n){return e.filter(e=>e.name==n)},addListItem:function e(t){let n=$("<button></button>").addClass("btn btn-primary");n.attr("data-toggle","modal").attr("data-target","#modalLong"),n.append(t.name),function e(t,n){t.on("pointerdown",()=>i(n))}(n,t);let o=$("<div></div>");o.addClass("list-group-item list-group-item-dark"),o.append(n);$("#pokemon-list").append(o)},showDetail:i,loadList:r,loadDetails:s,showLoadingMessage:d,hideLoadingMessage:l,showModal:p,hideModal:h}}();function searchPokemon(e){if($("li").show(),""==e){$("#pokemon-list button").parent().show();return}$("#pokemon-list button:not(:contains("+e+"))").parent().hide()}repoPokemon.loadList().then(()=>{repoPokemon.getAll().forEach(e=>{repoPokemon.addListItem(e)})}).catch(e=>console.error(e)),$("#pokemon-search").keypress(e=>{searchPokemon($("#pokemon-search").val()+e.key)}),$("#pokemon-search").keyup(e=>{if(8==e.keyCode)searchPokemon($("#pokemon-search").val())});